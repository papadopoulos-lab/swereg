% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helper_functions.R
\name{make_rowind_first_occurrence}
\alias{make_rowind_first_occurrence}
\title{Create row-independent variable from first occurrence of a condition}
\usage{
make_rowind_first_occurrence(dt, condition, value_var, new_var)
}
\arguments{
\item{dt}{data.table containing the skeleton data}

\item{condition}{String expression defining when to capture the value 
(e.g., "diag_gd_icd10_F64_089 == TRUE & is_amab == FALSE")}

\item{value_var}{Character string naming the column to extract the value from}

\item{new_var}{Character string naming the new rowind variable to create}
}
\value{
The input data.table (modified by reference) with the new rowind variable added
}
\description{
Transforms a row-dependent (rowdep) variable into a row-independent (rowind) 
variable by finding the first occurrence where a condition is TRUE and 
spreading that value across all rows for each person. This is a common 
pattern in longitudinal registry data analysis.
}
\examples{
\dontrun{
# Load fake data
data("fake_demographics")

# Create skeleton 
skeleton <- create_skeleton(
  fake_demographics$lopnr[1:10], 
  "2020-01-01", "2020-12-31"
)

# Add some diagnosis data
add_diagnoses(skeleton, fake_inpatient_diagnoses, "lopnr", 
              diags = list("example_diag" = "^F64"))

# Create rowind variable for age at first diagnosis
make_rowind_first_occurrence(skeleton,
                             condition = "diag_example_diag == TRUE",
                             value_var = "age", 
                             new_var = "rowind_age_first_example_diag")
}
}
\seealso{
\code{\link{first_non_na}} for the aggregation function used internally

Other data_integration: 
\code{\link{add_annual}()},
\code{\link{add_cods}()},
\code{\link{add_diagnoses}()},
\code{\link{add_onetime}()},
\code{\link{add_operations}()},
\code{\link{add_rx}()}
}
\concept{data_integration}
