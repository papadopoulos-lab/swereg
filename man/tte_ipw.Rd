% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tte_methods.R
\name{tte_ipw}
\alias{tte_ipw}
\title{Calculate inverse probability of treatment weights}
\usage{
tte_ipw(trial, ...)
}
\arguments{
\item{trial}{A [TTETrial] object with trial level data.}

\item{...}{Method arguments: `stabilize` (logical, default TRUE).}
}
\value{
The modified [TTETrial] object (for chaining).
}
\description{
S7 method that calculates IPW for baseline confounding adjustment.
Wraps [tte_calculate_ipw()].
}
\details{
This method requires `data_level == "trial"`.


**Problem:** Exposed and unexposed groups may differ in baseline
characteristics (e.g., age, education) that also affect the outcome.
This confounds the treatment-outcome relationship.

**Solution:** Reweight the sample so that confounders are balanced across
groups. People who are unlikely to be exposed (given their characteristics)
but ARE exposed get upweighted; people likely to be exposed who ARE exposed
get downweighted. This creates a "pseudo-population" where treatment is
independent of confounders.

**Notation:**
\itemize{
  \item A = treatment (exposed vs unexposed)
  \item L = confounders (age, education, etc.)
  \item P(A) = marginal probability of treatment (overall % exposed)
  \item P(A|L) = probability of treatment given confounders (propensity score)
}

**Stabilized weights:**
\itemize{
  \item Exposed: P(A) / P(A|L) - upweight if unlikely to be exposed
  \item Unexposed: (1-P(A)) / (1-P(A|L)) - upweight if likely to be exposed
}

Unlike IPCW-PP (see [tte_ipcw_pp()]), the marginal probability here is computed
across everyone (not within exposure groups), because we're modeling
treatment assignment, not censoring.

IPW is calculated at baseline (tstart == 0) and then merged back to all
time periods. This ensures baseline confounding adjustment is applied
consistently across follow-up.
}
\examples{
\dontrun{
trial <- tte_trial(data, design) |>
  tte_collapse(period_width = 4) |>
  tte_ipw(stabilize = TRUE)
}

}
\seealso{
[tte_calculate_ipw()] for the underlying function

Other tte_methods: 
\code{\link{tte_collapse}()},
\code{\link{tte_enroll}()},
\code{\link{tte_extract}()},
\code{\link{tte_ipcw_pp}()},
\code{\link{tte_irr}()},
\code{\link{tte_irr_combine}()},
\code{\link{tte_km}()},
\code{\link{tte_prepare_outcome}()},
\code{\link{tte_rates}()},
\code{\link{tte_rates_combine}()},
\code{\link{tte_rbind}()},
\code{\link{tte_summary}()},
\code{\link{tte_table1}()},
\code{\link{tte_truncate}()},
\code{\link{tte_weight_summary}()},
\code{\link{tte_weights}()}
}
\concept{tte_methods}
