% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tte_methods.R
\name{tte_collapse}
\alias{tte_collapse}
\title{Collapse time intervals to coarser periods}
\usage{
tte_collapse(trial, ...)
}
\arguments{
\item{trial}{A [TTETrial] object with trial level data.}

\item{...}{Method arguments: `period_width` (integer, default 4),
`time_var` (character or NULL; defaults to "trial_week" if it exists from
[tte_enroll()], otherwise uses `tstop_var`), `first_cols`, `last_cols`,
`max_cols`, `sum_cols` (character vectors for additional aggregation columns).}
}
\value{
The modified [TTETrial] object (for chaining).
}
\description{
S7 method that aggregates fine-grained longitudinal data into coarser
time periods. Wraps [tte_collapse_periods()].
}
\details{
This method requires `data_level == "trial"`.

Column aggregation is inferred from the design:
- `confounder_vars`, `exposure_var`, `person_id_var` -> first (baseline values)
- `time_exposure_var` -> last (current status)
- `outcome_vars` -> max (any event in period)
- `isoyearweek` -> first (auto-included when `admin_censor_isoyearweek` is set)

The method also creates a `person_weeks` column (tstop - tstart).
}
\examples{
\dontrun{
trial <- tte_trial(data, design) |>
  tte_collapse(period_width = 4)
}

}
\seealso{
[tte_enroll()] for the preceding step,
  [tte_collapse_periods()] for the underlying function

Other tte_methods: 
\code{\link{tte_enroll}()},
\code{\link{tte_extract}()},
\code{\link{tte_ipcw_pp}()},
\code{\link{tte_ipw}()},
\code{\link{tte_irr}()},
\code{\link{tte_km}()},
\code{\link{tte_prepare_outcome}()},
\code{\link{tte_rates}()},
\code{\link{tte_rbind}()},
\code{\link{tte_summary}()},
\code{\link{tte_table1}()},
\code{\link{tte_truncate}()},
\code{\link{tte_weight_summary}()},
\code{\link{tte_weights}()}
}
\concept{tte_methods}
