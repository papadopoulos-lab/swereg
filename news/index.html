<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • swereg</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://papadopoulos-lab.github.io/swereg/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">swereg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">26.2.22</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/skeleton-concept.html">Skeleton concept</a></li>
    <li><a class="dropdown-item" href="../articles/rowdep-rowind-concept.html">Variable types: rowdep vs rowind</a></li>
    <li><a class="dropdown-item" href="../articles/tte-nomenclature.html">Target trial emulation nomenclature</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Implementation</h6></li>
    <li><a class="dropdown-item" href="../articles/skeleton1-create.html">Building the data skeleton (skeleton1_create)</a></li>
    <li><a class="dropdown-item" href="../articles/skeleton2-clean.html">Cleaning and deriving variables (skeleton2_clean)</a></li>
    <li><a class="dropdown-item" href="../articles/skeleton3-analyze.html">Batching (skeleton3_analyze)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Cookbooks</h6></li>
    <li><a class="dropdown-item" href="../articles/cookbook-survival-analysis.html">Survival analysis with time-varying covariates</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/papadopoulos-lab/swereg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/papadopoulos-lab/swereg/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.22" id="swereg-26222">swereg 26.2.22<a class="anchor" aria-label="anchor" href="#swereg-26222"></a></h2>
<div class="section level3">
<h3 id="new-features-26-2-22">New features<a class="anchor" aria-label="anchor" href="#new-features-26-2-22"></a></h3>
<ul><li><p><strong>EXPORTED</strong>: <code><a href="../reference/tte_callr_pool.html">tte_callr_pool()</a></code> — generic <code><a href="https://callr.r-lib.org/reference/r_bg.html" class="external-link">callr::r_bg()</a></code> worker pool, generalized from the internal <code>.tte_callr_pool()</code>. New API accepts <code>items</code> (list of arg-lists), <code>worker_fn</code>, <code>item_labels</code>, and <code>collect</code> (FALSE to discard results when workers save directly). Eliminates boilerplate when scripts need their own parallel loops (e.g., Loop 2 IPCW-PP).</p></li>
<li><p><strong>NEW</strong>: <code>TTEPlan$generate_analysis_files_and_ipcw_pp()</code> — Loop 2 method that runs per-ETT IPCW-PP calculation and saves analysis-ready files. Mirrors <code>$generate_enrollments_and_ipw()</code> (Loop 1). Parameters: <code>output_dir</code>, <code>estimate_ipcw_pp_separately_by_exposure</code>, <code>estimate_ipcw_pp_with_gam</code>, <code>n_workers</code>, <code>swereg_dev_path</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-26-2-22">Improvements<a class="anchor" aria-label="anchor" href="#improvements-26-2-22"></a></h3>
<ul><li><p><strong>MEMORY</strong>: <code><a href="../reference/tte_calculate_ipcw.html">tte_calculate_ipcw()</a></code> now uses <code>mgcv::bam(discrete = TRUE)</code> instead of <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam()</a></code> when <code>use_gam = TRUE</code>. <code>bam()</code> discretizes covariates to avoid forming the full model matrix, dramatically reducing peak memory for large datasets. Model objects are also explicitly freed (<code><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm()</a></code> + <code><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc()</a></code>) between exposed/unexposed fits.</p></li>
<li><p><strong>MEMORY</strong>: <code>$irr()</code> and <code>$km()</code> now subset to only the columns needed before creating <code>survey::svydesign()</code>. Previously the full data.table (all columns) was copied into the survey object. Model objects and intermediate data are freed between fits.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.21" id="swereg-26221">swereg 26.2.21<a class="anchor" aria-label="anchor" href="#swereg-26221"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-21">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-21"></a></h3>
<ul><li><p><strong>RENAMED</strong>: <code>$prepare_for_analysis()</code> parameters <code>estimate_ipcw_separately_by_exposure</code> → <code>estimate_ipcw_pp_separately_by_exposure</code> and <code>estimate_ipcw_with_gam</code> → <code>estimate_ipcw_pp_with_gam</code> for consistency with the IPCW-PP method they control.</p></li>
<li>
<p><strong>PRIVATE</strong>: <code>$enroll()</code>, <code>$prepare_outcome()</code>, <code>$ipcw_pp()</code>, and <code>$combine_weights()</code> are now private methods on <code>TTEEnrollment</code>.</p>
<ul><li>Enrollment: use <code>tte_enrollment(data, design, ratio = 2, seed = 4)</code> instead of <code>tte_enrollment(data, design)$enroll(ratio = 2, seed = 4)</code>.</li>
<li>Outcome prep + IPCW: use <code>$prepare_for_analysis()</code> (unchanged).</li>
<li>Weight combination: handled automatically by <code>$ipcw_pp()</code> (unchanged).</li>
<li>Tests can access private methods via <code>enrollment$.__enclos_env__$private$method_name()</code>.</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.20" id="swereg-26220">swereg 26.2.20<a class="anchor" aria-label="anchor" href="#swereg-26220"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-20">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-20"></a></h3>
<ul><li>
<strong>RENAMED</strong>: <code>$prepare_analysis()</code> → <code>$prepare_for_analysis()</code> on <code>TTEEnrollment</code>. The new name better communicates that this method <em>prepares</em> the enrollment <em>for</em> analysis (it is not the analysis itself).</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-26-2-20">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-26-2-20"></a></h3>
<ul><li><p><strong>FIXED</strong>: 3 remaining broken test calls (<code>tte_extract()</code>, <code>tte_summary()</code>, <code>tte_weights()</code>) migrated to R6 method syntax (<code>$extract()</code>, <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code>$combine_weights()</code>). Column assertion updated: <code>"weight_pp"</code> → <code>"analysis_weight_pp"</code>.</p></li>
<li><p><strong>FIXED</strong>: <code>$impute_confounders()</code> now appends <code>"impute"</code> to <code>steps_completed</code>, consistent with all other mutating methods.</p></li>
<li><p><strong>FIXED</strong>: <code>$ipcw_pp()</code> IPW column guard moved from after IPCW computation to before it (fail-fast).</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-26-2-20">Documentation<a class="anchor" aria-label="anchor" href="#documentation-26-2-20"></a></h3>
<ul><li><p><strong>FIXED</strong>: Vignette truncation bounds corrected from “0.5th and 99.5th percentiles” to “1st and 99th percentiles” (matching code defaults <code>lower = 0.01, upper = 0.99</code>).</p></li>
<li><p><strong>FIXED</strong>: <code>TTEDesign</code> roxygen references to removed <code>tte_match()</code> / <code>tte_expand()</code> replaced with <code>$enroll()</code>.</p></li>
<li><p><strong>FIXED</strong>: <code>$weight_summary()</code> moved from “Mutating” to “Non-mutating” section in <code>TTEEnrollment</code> roxygen (it only prints, never modifies data).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.13" id="swereg-26213">swereg 26.2.13<a class="anchor" aria-label="anchor" href="#swereg-26213"></a></h2>
<div class="section level3">
<h3 id="new-features-26-2-13">New features<a class="anchor" aria-label="anchor" href="#new-features-26-2-13"></a></h3>
<ul><li><p><strong>NEW</strong>: <code>$prepare_for_analysis()</code> method on <code>TTEEnrollment</code> merges <code>$prepare_outcome()</code> + <code>$ipcw_pp()</code> into one step. Parameters: <code>outcome</code>, <code>follow_up</code>, <code>separate_by_exposure</code>, <code>use_gam</code>, <code>censoring_var</code>.</p></li>
<li><p><strong>NEW</strong>: <code>$enrollment_stage</code> active binding on <code>TTEEnrollment</code>. Derives lifecycle stage from existing state: <code>"pre_enrollment"</code> → <code>"enrolled"</code> → <code>"analysis_ready"</code>. Zero maintenance — reads <code>data_level</code> and <code>steps_completed</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-26-2-13">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-26-2-13"></a></h3>
<ul><li>
<strong>FIXED</strong>: 24 broken test cases calling removed standalone functions (<code>tte_enroll()</code>, <code>tte_collapse()</code>, <code>tte_ipw()</code>, <code>tte_truncate()</code>, <code>tte_prepare_outcome()</code>) migrated to R6 method syntax. Error message patterns updated to match method names (e.g., <code>enroll()</code> not <code>tte_enroll()</code>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.12" id="swereg-26212">swereg 26.2.12<a class="anchor" aria-label="anchor" href="#swereg-26212"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-12">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-12"></a></h3>
<ul><li>
<strong>RENAMED</strong>: <code>TTETrial</code> class → <code>TTEEnrollment</code>, <code>tte_trial()</code> → <code><a href="../reference/tte_enrollment.html">tte_enrollment()</a></code>, <code>summary.TTETrial</code> → <code>summary.TTEEnrollment</code>. The class represents an enrollment (matching + panel expansion), not an individual emulated target trial (ETT). Aligns naming with the ETT grid concept in <code>TTEPlan</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.11" id="swereg-26211">swereg 26.2.11<a class="anchor" aria-label="anchor" href="#swereg-26211"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-11">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-11"></a></h3>
<ul><li>
<p><strong>REMOVED</strong>: 19 standalone TTE functions moved to R6 methods on <code>TTETrial</code> (15 methods) and <code>TTEPlan</code> (4 methods). Pipe chaining (<code>trial |&gt; tte_ipw()</code>) replaced with <code>$</code>-chaining (<code>trial$ipw()</code>).</p>
<p><strong>TTETrial methods</strong>: <code>$enroll()</code>, <code>$collapse()</code>, <code>$ipw()</code>, <code>$ipcw_pp()</code>, <code>$combine_weights()</code>, <code>$truncate()</code>, <code>$prepare_outcome()</code>, <code>$impute_confounders()</code>, <code>$weight_summary()</code>, <code>$extract()</code>, <code>$summary()</code>, <code>$table1()</code>, <code>$rates()</code>, <code>$irr()</code>, <code>$km()</code>.</p>
<p><strong>TTEPlan methods</strong>: <code>$add_one_ett()</code>, <code>$save()</code>, <code>$enrollment_spec()</code>, <code>$generate_enrollments_and_ipw()</code>.</p>
</li>
<li>
<p><strong>RENAMED</strong>: <code>TTEPlan$task()</code> → <code>TTEPlan$enrollment_spec()</code>. The method returns enrollment metadata (design, enrollment_id, age_range, n_threads), not a generic task. The <code>process_fn</code> callback parameter convention changes from <code>function(task, file_path)</code> to <code>function(enrollment_spec, file_path)</code>.</p>
<p>Removed exports: <code>tte_enroll</code>, <code>tte_collapse</code>, <code>tte_ipw</code>, <code>tte_ipcw_pp</code>, <code>tte_weights</code>, <code>tte_truncate</code>, <code>tte_prepare_outcome</code>, <code>tte_extract</code>, <code>tte_summary</code>, <code>tte_weight_summary</code>, <code>tte_table1</code>, <code>tte_rates</code>, <code>tte_irr</code>, <code>tte_km</code>, <code>tte_plan_add_one_ett</code>, <code>tte_plan_save</code>, <code>tte_plan_task</code>, <code>tte_generate_enrollments_and_ipw</code>.</p>
<p>Kept standalone: <code><a href="../reference/tte_rbind.html">tte_rbind()</a></code>, <code><a href="../reference/tte_rates_combine.html">tte_rates_combine()</a></code>, <code><a href="../reference/tte_irr_combine.html">tte_irr_combine()</a></code>, <code><a href="../reference/tte_impute_confounders.html">tte_impute_confounders()</a></code> (thin wrapper for callback default).</p>
</li>
<li><p><strong>CHANGED</strong>: TTE classes (<code>TTEDesign</code>, <code>TTETrial</code>, <code>TTEPlan</code>) migrated from S7 to R6. Property access changes from <code>@</code> to <code>$</code> (e.g., <code>trial@data</code> → <code>trial$data</code>, <code>design@id_var</code> → <code>design$id_var</code>). R6 reference semantics eliminate copy-on-write overhead from <code>trial$data[, := ...]</code>, reducing peak RAM from ~3X to ~2X during the weight-calculation chain (Loop 2).</p></li>
<li>
<p><strong>FIXED</strong>: Three S7 <code>@</code> accessor bugs that silently produced no-ops:</p>
<ul><li>
<code>$ipcw_pp()</code>: dropping intermediate IPCW columns (<code>p_censor</code>, etc.)</li>
<li>
<code>$collapse()</code>: creating <code>person_weeks</code> column</li>
<li>
<code>$impute_confounders()</code>: deleting old confounder columns before merge All fixed automatically by R6 (in-place modification works).</li>
</ul></li>
<li><p><strong>CHANGED</strong>: <code>$ipcw_pp()</code> now inlines weight combination and truncation (was calling <code><a href="../reference/tte_combine_weights.html">tte_combine_weights()</a></code> and <code><a href="../reference/tte_truncate_weights.html">tte_truncate_weights()</a></code> via function parameters that created extra refcount). Keeps data.table refcount=1 throughout.</p></li>
</ul></div>
<div class="section level3">
<h3 id="file-reorganization-26-2-11">File reorganization<a class="anchor" aria-label="anchor" href="#file-reorganization-26-2-11"></a></h3>
<ul><li><p>Split <code>tte_classes.R</code> and <code>tte_methods.R</code> into per-class files with methods inline: <code>tte_design.R</code>, <code>tte_trial.R</code>, <code>tte_plan.R</code>. <code>tte_generate.R</code> reduced to thin <code><a href="../reference/tte_impute_confounders.html">tte_impute_confounders()</a></code> wrapper + <code>.tte_callr_pool()</code> helper.</p></li>
<li><p>Added <code>S3method(summary, TTETrial)</code> → delegates to <code>$summary()</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="dependencies-26-2-11">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies-26-2-11"></a></h3>
<ul><li>
<strong>ADDED</strong>: R6 package to Imports (S7 retained for skeleton classes).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.10" id="swereg-26210">swereg 26.2.10<a class="anchor" aria-label="anchor" href="#swereg-26210"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-26-2-10">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-26-2-10"></a></h3>
<ul><li>
<strong>FIXED</strong>: <code>tte_ipw()</code>, <code>tte_ipcw_pp()</code>: in-place joins via S7 <code>@</code> accessor now use extract/modify/reassign pattern (<code>dt &lt;- trial@data; dt[...]; trial@data &lt;- dt</code>). The previous <code>trial@data[i, := ...]</code> silently modified a copy, leaving the S7 object’s data unchanged.</li>
</ul></div>
<div class="section level3">
<h3 id="performance-26-2-10">Performance<a class="anchor" aria-label="anchor" href="#performance-26-2-10"></a></h3>
<ul><li>
<strong>IMPROVED</strong>: <code>tte_ipw()</code>, <code>tte_ipcw_pp()</code>, <code><a href="../reference/tte_calculate_ipcw.html">tte_calculate_ipcw()</a></code>: replace <code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> with in-place keyed joins (<code>data[i, := ...]</code>), reducing peak RAM from ~3x to ~2x panel size during the weight-calculation chain.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-26-2-10">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-10"></a></h3>
<ul><li><p><strong>CHANGED</strong>: <code>tte_ipcw_pp()</code> now also combines weights (<code>ipw * ipcw_pp</code> → <code>analysis_weight_pp</code>), truncates <code>analysis_weight_pp</code>, and drops intermediate IPCW columns (<code>p_censor</code>, <code>p_uncensored</code>, <code>cum_p_uncensored</code>, <code>marginal_p</code>, <code>cum_marginal</code>). Callers no longer need <code>tte_weights()</code> + <code>tte_truncate()</code> after <code>tte_ipcw_pp()</code>.</p></li>
<li><p><strong>RENAMED</strong>: <code>tte_generate_enrollments()</code> → <code>tte_generate_enrollments_and_ipw()</code>. Now computes IPW + truncation once on the full combined enrollment (after imputation), so the per-ETT Loop 2 no longer needs to call <code>tte_ipw()</code>. New <code>stabilize</code> parameter (default TRUE) controls IPW stabilization.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-26-2-10">New features<a class="anchor" aria-label="anchor" href="#new-features-26-2-10"></a></h3>
<ul><li><p><strong>NEW</strong>: <code><a href="../reference/tte_plan_load.html">tte_plan_load()</a></code> reads a <code>.qs2</code> plan file and reconstructs the <code>TTEPlan</code> S7 object. Companion to <code>tte_plan_save()</code>.</p></li>
<li><p><strong>CHANGED</strong>: <code>tte_plan_save()</code> now persists <code>project_prefix</code> and <code>skeleton_files</code> alongside <code>ett</code> and <code>global_max_isoyearweek</code>, so <code><a href="../reference/tte_plan_load.html">tte_plan_load()</a></code> can fully reconstruct the object.</p></li>
<li><p><strong>NEW</strong>: <code><a href="../reference/skeleton_process.html">skeleton_process()</a></code> gains <code>n_workers</code> parameter for parallel batch processing. When &gt; 1, uses <code><a href="https://callr.r-lib.org/reference/r.html" class="external-link">callr::r()</a></code> + <code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">parallel::mclapply()</a></code> to process batches concurrently while avoiding <code>fork()</code> + data.table OpenMP segfaults.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.9" id="swereg-2629">swereg 26.2.9<a class="anchor" aria-label="anchor" href="#swereg-2629"></a></h2>
<div class="section level3">
<h3 id="improvements-26-2-9">Improvements<a class="anchor" aria-label="anchor" href="#improvements-26-2-9"></a></h3>
<ul><li><p><strong>CHANGED</strong>: Migrate serialization from <code>qs</code> (archived) to <code>qs2</code>. <code>.qs_save</code>/<code>.qs_read</code> wrappers now call <code><a href="https://rdrr.io/pkg/qs2/man/qs_save.html" class="external-link">qs2::qs_save</a></code>/<code><a href="https://rdrr.io/pkg/qs2/man/qs_read.html" class="external-link">qs2::qs_read</a></code> (standard format, preserves S7 objects). All file extensions changed from <code>.qs</code> to <code>.qs2</code>. The <code>preset</code> parameter is no longer used.</p></li>
<li><p><strong>IMPROVED</strong>: <code>tte_rates()</code> now sets <code>swereg_type</code> and <code>exposure_var</code> attributes on its output; <code>tte_irr()</code> sets <code>swereg_type</code>.</p></li>
<li><p><strong>RENAMED</strong>: <code>tte_rates_table()</code> → <code><a href="../reference/tte_rates_combine.html">tte_rates_combine()</a></code>, <code>tte_irr_table()</code> → <code><a href="../reference/tte_irr_combine.html">tte_irr_combine()</a></code>. New API accepts <code>(results, slot, descriptions)</code> — extracts the rates/irr slot internally, removing the need for <code>lapply(results, [[, "table2")</code> at call sites. Exposure column is now read from the <code>exposure_var</code> attribute instead of guessing via <code><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-26-2-9">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-9"></a></h3>
<ul><li><p><strong>CHANGED</strong>: <code>tte_plan_add_one_ett()</code> now requires explicit <code>enrollment_id</code> parameter. Auto-assignment based on follow_up + age_group removed. Validation that design params match within an enrollment_id is preserved.</p></li>
<li><p><strong>IMPROVED</strong>: <code>print(plan)</code> now shows both enrollment grid and full ETT grid.</p></li>
<li><p><strong>CHANGED</strong>: <code>tte_plan_add_one_ett()</code> bundles <code>age_group</code>, <code>age_min</code>, <code>age_max</code>, <code>person_id_var</code> into an <code>argset</code> named list parameter. <code>time_exposure_var</code> and <code>eligible_var</code> no longer have defaults (must be explicit). <code>exposure_var</code> removed from interface (hardcoded to <code>"baseline_exposed"</code>).</p></li>
<li><p><strong>RENAMED</strong>: <code>file_id</code> column in the <code>ett</code> data.table → <code>enrollment_id</code>. This makes explicit that ETTs sharing the same follow_up + age_group are processed together as one “enrollment” (shared eligibility, matching, collapse, imputation).</p></li>
<li><p><strong>RENAMED</strong>: <code>tte_generate_trials()</code> → <code>tte_generate_enrollments()</code>. The function generates enrollments (one per follow_up × age_group), not individual trials.</p></li>
<li><p><strong>RENAMED</strong>: <code>tte_plan_task()</code> return list key <code>file_id</code> → <code>enrollment_id</code>.</p></li>
<li><p><strong>UPDATED</strong>: <code>print(plan)</code> now shows “Enrollments: N x M skeleton files” instead of “Tasks: N file_id(s) x M skeleton files”.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.8" id="swereg-2628">swereg 26.2.8<a class="anchor" aria-label="anchor" href="#swereg-2628"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-8">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-8"></a></h3>
<ul><li><p><strong>CHANGED</strong>: <code><a href="../reference/tte_plan.html">tte_plan()</a></code> is now infrastructure-only — takes only <code>project_prefix</code>, <code>skeleton_files</code>, <code>global_max_isoyearweek</code>. Use <code>tte_plan_add_one_ett()</code> to add ETTs with per-ETT design parameters.</p></li>
<li><p><strong>REMOVED</strong>: TTEPlan plan-level properties <code>confounder_vars</code>, <code>person_id_var</code>, <code>exposure_var</code>, <code>time_exposure_var</code>, <code>eligible_var</code>. These are now per-ETT columns in the <code>ett</code> data.table.</p></li>
<li><p><strong>REMOVED</strong>: Internal <code>.tte_grid()</code> function. The ETT grid is now built incrementally via <code>tte_plan_add_one_ett()</code>.</p></li>
<li><p><strong>ADDED</strong>: <code>TTEPlan@project_prefix</code> property (needed for file naming in <code>tte_plan_add_one_ett()</code>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-26-2-8">New features<a class="anchor" aria-label="anchor" href="#new-features-26-2-8"></a></h3>
<ul><li><p><strong>NEW</strong>: <code>tte_plan_add_one_ett()</code> — builder function that adds one ETT row to a plan. Stores design params (confounder_vars, person_id_var, exposure_var, time_exposure_var, eligible_var) per-ETT, allowing different ETTs to use different confounders. Validates that design params match within an enrollment_id (same follow_up + age_group).</p></li>
<li><p><strong>RENAMED</strong>: <code>TTEPlan@files</code> property → <code>TTEPlan@skeleton_files</code> for clarity.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.7" id="swereg-2627">swereg 26.2.7<a class="anchor" aria-label="anchor" href="#swereg-2627"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-7">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-7"></a></h3>
<ul><li>
<strong>REFACTORED</strong>: <code>tte_generate_enrollments()</code> (formerly <code>tte_generate_trials()</code>) now takes a <code>TTEPlan</code> object instead of separate parameters (<code>ett</code>, <code>files</code>, <code>confounder_vars</code>, <code>global_max_isoyearweek</code>). The <code>process_fn</code> callback signature changes from <code>function(file_path, design, file_id, age_range, n_threads)</code> to <code>function(task, file_path)</code> where <code>task</code> is a list with <code>design</code>, <code>enrollment_id</code>, <code>age_range</code>, and <code>n_threads</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-26-2-7">New features<a class="anchor" aria-label="anchor" href="#new-features-26-2-7"></a></h3>
<ul><li>
<strong>NEW</strong>: <code>TTEPlan</code> S7 class bundles ETT grid, skeleton file paths, confounder definitions, and design column names into a single object for trial generation.
<ul><li>
<code><a href="../reference/tte_plan.html">tte_plan()</a></code>: Constructor function</li>
<li>
<code>tte_plan_task(plan, i)</code>: Extract the i-th enrollment task as a list with <code>design</code>, <code>enrollment_id</code>, <code>age_range</code>, <code>n_threads</code>
</li>
<li>
<code>plan[[i]]</code>: Shorthand for <code>tte_plan_task(plan, i)</code>
</li>
<li>
<code>length(plan)</code>: Number of unique enrollment_id groups</li>
<li>Supports interactive testing: <code>task &lt;- plan[[1]]; process_fn(task, plan@skeleton_files[1])</code>
</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.6" id="swereg-2626">swereg 26.2.6<a class="anchor" aria-label="anchor" href="#swereg-2626"></a></h2>
<div class="section level3">
<h3 id="documentation-26-2-6">Documentation<a class="anchor" aria-label="anchor" href="#documentation-26-2-6"></a></h3>
<ul><li>
<strong>FIXED</strong>: Add missing topics to pkgdown reference index (TTEDesign, TTETrial, x2026_mht_add_lmed)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.5" id="swereg-2625">swereg 26.2.5<a class="anchor" aria-label="anchor" href="#swereg-2625"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-26-2-5">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-26-2-5"></a></h3>
<ul><li>
<strong>FIXED</strong>: Set <code>eval = FALSE</code> in skeleton3-analyze vignette to prevent build errors from optional <code>qs</code> package dependency</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.4" id="swereg-2624">swereg 26.2.4<a class="anchor" aria-label="anchor" href="#swereg-2624"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-26-2-4">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-26-2-4"></a></h3>
<ul><li>
<strong>FIXED</strong>: Remove <code>qs</code> from Suggests to fix GitHub Actions CI (package not available on CRAN)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.2.3" id="swereg-2623">swereg 26.2.3<a class="anchor" aria-label="anchor" href="#swereg-2623"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-26-2-3">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-2-3"></a></h3>
<ul><li>
<strong>REPLACED</strong>: <code>tte_match()</code> and <code>tte_expand()</code> merged into single <code>tte_enroll()</code> function:
<ul><li>Old workflow: <code>tte_trial(data, design) |&gt; tte_match(ratio = 2, seed = 4) |&gt; tte_expand(extra_cols = "isoyearweek")</code>
</li>
<li>New workflow: <code>tte_trial(data, design) |&gt; tte_enroll(ratio = 2, seed = 4, extra_cols = "isoyearweek")</code>
</li>
<li>The two operations were tightly coupled and always used together</li>
<li>
<code>tte_enroll()</code> combines sampling (matching) and panel expansion in one step</li>
<li>Records “enroll” in <code>steps_completed</code> (previously recorded “match” then “expand”)</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-26-2-3">New features<a class="anchor" aria-label="anchor" href="#new-features-26-2-3"></a></h3>
<ul><li>
<strong>NEW</strong>: Trial eligibility helper functions for composable eligibility criteria:
<ul><li>
<code><a href="../reference/tte_eligible_isoyears.html">tte_eligible_isoyears()</a></code>: Check eligibility based on calendar years</li>
<li>
<code><a href="../reference/tte_eligible_age_range.html">tte_eligible_age_range()</a></code>: Check eligibility based on age range</li>
<li>
<code><a href="../reference/tte_eligible_no_events_in_window_excluding_wk0.html">tte_eligible_no_events_in_window_excluding_wk0()</a></code>: Check for no events in prior window (correctly excludes baseline week)</li>
<li>
<code><a href="../reference/tte_eligible_no_observation_in_window_excluding_wk0.html">tte_eligible_no_observation_in_window_excluding_wk0()</a></code>: Check for no specific value in prior window (for categorical variables)</li>
<li>
<code><a href="../reference/tte_eligible_combine.html">tte_eligible_combine()</a></code>: Combine multiple eligibility columns using AND logic</li>
<li>All functions modify data.tables by reference and return invisibly for method chaining</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-26-2-3">Documentation<a class="anchor" aria-label="anchor" href="#documentation-26-2-3"></a></h3>
<ul><li>
<strong>IMPROVED</strong>: Clarified that eligibility checks should EXCLUDE the baseline week. Using <code>cumsum(x) == 0</code> is incorrect because it includes the current week. The new eligibility functions use <code><a href="../reference/any_events_prior_to.html">any_events_prior_to()</a></code> which correctly excludes the current row.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.1.31" id="swereg-26131">swereg 26.1.31<a class="anchor" aria-label="anchor" href="#swereg-26131"></a></h2>
<div class="section level3">
<h3 id="new-features-26-1-31">New features<a class="anchor" aria-label="anchor" href="#new-features-26-1-31"></a></h3>
<ul><li>
<strong>NEW</strong>: S7 object-oriented API for target trial emulation workflows:
<ul><li>
<code>TTEDesign</code> class: Define column name mappings once and reuse across all TTE functions</li>
<li>
<code>TTETrial</code> class: Fluent method chaining with workflow state tracking</li>
<li>
<code><a href="../reference/tte_design.html">tte_design()</a></code> / <code>tte_trial()</code>: Constructor functions for the S7 classes</li>
<li>
<code>tte_match()</code>, <code>tte_expand()</code>, <code>tte_collapse()</code>, <code>tte_ipw()</code>: S7 methods for data preparation</li>
<li>
<code>tte_prepare_outcome()</code>, <code>tte_ipcw()</code>: Outcome-specific per-protocol analysis</li>
<li>
<code>tte_weights()</code>, <code>tte_truncate()</code>: Weight combination and truncation</li>
<li>
<code><a href="../reference/tte_rbind.html">tte_rbind()</a></code>: Combine batched trial objects</li>
<li>
<code>tte_extract()</code>, <code>tte_summary()</code>: Access data and diagnostics</li>
<li>
<code>tte_table1()</code>, <code>tte_rates()</code>, <code>tte_irr()</code>, <code>tte_km()</code>: Analysis and visualization</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-26-1-31">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-26-1-31"></a></h3>
<ul><li>
<strong>REMOVED</strong>: Deprecated S7 methods replaced by <code>tte_prepare_outcome()</code>:
<ul><li>
<code>tte_tte()</code>: Use <code>tte_prepare_outcome()</code> which computes <code>weeks_to_event</code> internally</li>
<li>
<code>tte_set_outcome()</code>: Use <code>tte_prepare_outcome(outcome = "...")</code> instead</li>
<li>
<code>tte_censoring()</code>: Use <code>tte_prepare_outcome()</code> which handles censoring internally</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="dependencies-26-1-31">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies-26-1-31"></a></h3>
<ul><li>
<strong>ADDED</strong>: S7 package to Imports for object-oriented class system</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="26.1.30" id="swereg-26130">swereg 26.1.30<a class="anchor" aria-label="anchor" href="#swereg-26130"></a></h2>
<div class="section level3">
<h3 id="new-features-26-1-30">New features<a class="anchor" aria-label="anchor" href="#new-features-26-1-30"></a></h3>
<ul><li>
<strong>NEW</strong>: Target trial emulation weight functions for causal inference in observational studies:
<ul><li>
<code><a href="../reference/tte_calculate_ipw.html">tte_calculate_ipw()</a></code>: Calculate stabilized inverse probability of treatment weights (IPW) for baseline confounding adjustment using propensity scores</li>
<li>
<code><a href="../reference/tte_calculate_ipcw.html">tte_calculate_ipcw()</a></code>: Calculate time-varying inverse probability of censoring weights (IPCW) for per-protocol analysis using GAM or GLM</li>
<li>
<code><a href="../reference/tte_identify_censoring.html">tte_identify_censoring()</a></code>: Identify protocol deviation and loss to follow-up for per-protocol analysis</li>
<li>
<code><a href="../reference/tte_combine_weights.html">tte_combine_weights()</a></code>: Combine IPW and IPCW weights for per-protocol effect estimation</li>
<li>
<code><a href="../reference/tte_truncate_weights.html">tte_truncate_weights()</a></code>: Truncate extreme weights at specified quantiles to reduce variance</li>
</ul></li>
<li>
<strong>NEW</strong>: Target trial emulation data preparation functions:
<ul><li>
<code><a href="../reference/tte_match_ratio.html">tte_match_ratio()</a></code>: Sample comparison group at specified ratio (e.g., 2:1 unexposed to exposed)</li>
<li>
<code><a href="../reference/tte_collapse_periods.html">tte_collapse_periods()</a></code>: Collapse fine-grained time intervals (e.g., weekly) to coarser periods (e.g., 4-week)</li>
<li>
<code><a href="../reference/tte_time_to_event.html">tte_time_to_event()</a></code>: Calculate time to first event for each trial/person</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="dependencies-26-1-30">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies-26-1-30"></a></h3>
<ul><li>
<strong>ADDED</strong>: mgcv package to Imports for flexible GAM-based censoring models in <code><a href="../reference/tte_calculate_ipcw.html">tte_calculate_ipcw()</a></code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.12.24" id="swereg-251224">swereg 25.12.24<a class="anchor" aria-label="anchor" href="#swereg-251224"></a></h2>
<div class="section level3">
<h3 id="api-changes-25-12-24">API changes<a class="anchor" aria-label="anchor" href="#api-changes-25-12-24"></a></h3>
<ul><li>
<strong>SIMPLIFIED</strong>: Removed <code>validate_source_column()</code> requirement from <code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>, <code><a href="../reference/add_operations.html">add_operations()</a></code>, <code><a href="../reference/add_icdo3s.html">add_icdo3s()</a></code>, <code><a href="../reference/add_snomed3s.html">add_snomed3s()</a></code>, and <code><a href="../reference/add_snomedo10s.html">add_snomedo10s()</a></code>:
<ul><li>The <code>source</code> column is no longer required in diagnosis data</li>
<li>To track diagnoses by source (inpatient/outpatient/cancer), filter the dataset externally before calling <code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>
</li>
<li>See <code><a href="../reference/add_diagnoses.html">?add_diagnoses</a></code> for the recommended pattern</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-25-12-24">New features<a class="anchor" aria-label="anchor" href="#new-features-25-12-24"></a></h3>
<ul><li>
<strong>NEW</strong>: <code><a href="../reference/any_events_prior_to.html">any_events_prior_to()</a></code> function for survival analysis:
<ul><li>Checks if any TRUE values exist in a preceding time window (excludes current row)</li>
<li>Useful for determining if an event occurred in a prior time period</li>
<li>Default window of 104 weeks (~2 years) with customizable size</li>
<li>Complements <code><a href="../reference/steps_to_first.html">steps_to_first()</a></code> for comprehensive time-to-event analysis</li>
</ul></li>
<li>
<strong>ENHANCED</strong>: <code><a href="../reference/steps_to_first.html">steps_to_first()</a></code> function improvements:
<ul><li>Renamed parameter from <code>window</code> to <code>window_including_wk0</code> for clarity</li>
<li>Default window is now 104 (inclusive of current week)</li>
<li>Added <code>@family survival_analysis</code> tag and cross-reference to <code><a href="../reference/any_events_prior_to.html">any_events_prior_to()</a></code>
</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-25-12-24">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-25-12-24"></a></h3>
<ul><li>
<strong>FIXED</strong>: Added slider package to Imports in DESCRIPTION to fix R CMD check warning about undeclared import</li>
</ul></div>
<div class="section level3">
<h3 id="data-25-12-24">Data<a class="anchor" aria-label="anchor" href="#data-25-12-24"></a></h3>
<ul><li>
<strong>BREAKING</strong>: Replaced separate <code>fake_inpatient_diagnoses</code> and <code>fake_outpatient_diagnoses</code> with unified <code>fake_diagnoses</code> dataset:
<ul><li>New <code>SOURCE</code> column identifies data origin: “inpatient”, “outpatient”, or “cancer”</li>
<li>~2000 inpatient records, ~2000 outpatient records, ~1000 cancer records</li>
<li>Cancer records always have populated <code>ICDO3</code> codes</li>
<li>Enables testing of source-based filtering and validation</li>
</ul></li>
<li>
<strong>ENHANCED</strong>: Added ICD-O-3 and SNOMED-CT columns to fake diagnosis data:
<ul><li>
<code>ICDO3</code>: ICD-O-3 morphology codes (always populated for cancer source)</li>
<li>
<code>SNOMED3</code>: SNOMED-CT version 3 codes</li>
<li>
<code>SNOMEDO10</code>: SNOMED-CT version 10 codes</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="validation-25-12-24">Validation<a class="anchor" aria-label="anchor" href="#validation-25-12-24"></a></h3>
<ul><li>
<strong>ENHANCED</strong>: SOURCE column validation is now optional - filter externally if needed (see API changes above)</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-25-12-24">Documentation<a class="anchor" aria-label="anchor" href="#documentation-25-12-24"></a></h3>
<ul><li>
<strong>IMPROVED</strong>: Examples for <code><a href="../reference/add_icdo3s.html">add_icdo3s()</a></code>, <code><a href="../reference/add_snomed3s.html">add_snomed3s()</a></code>, and <code><a href="../reference/add_snomedo10s.html">add_snomedo10s()</a></code> are now runnable using package fake data (previously wrapped in <code>\dontrun{}</code>)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.12.6" id="swereg-25126">swereg 25.12.6<a class="anchor" aria-label="anchor" href="#swereg-25126"></a></h2>
<div class="section level3">
<h3 id="new-features-25-12-6">New features<a class="anchor" aria-label="anchor" href="#new-features-25-12-6"></a></h3>
<ul><li>
<strong>NEW</strong>: <code><a href="../reference/steps_to_first.html">steps_to_first()</a></code> function for survival analysis:
<ul><li>Calculates the number of steps (e.g., weeks) until the first TRUE value in a forward-looking window</li>
<li>Useful for time-to-event calculations in longitudinal registry data</li>
<li>Default window of 103 weeks (~2 years) with customizable size</li>
<li>Returns NA if no event occurs within the window</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-25-12-6">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-25-12-6"></a></h3>
<ul><li>
<strong>CRITICAL</strong>: Fixed <code><a href="../reference/add_snomed3s.html">add_snomed3s()</a></code> and <code><a href="../reference/add_snomedo10s.html">add_snomedo10s()</a></code> calling non-existent internal functions
<ul><li>Both functions now correctly call <code>add_diagnoses_or_operations_or_cods_or_icdo3_or_snomed()</code>
</li>
<li>These functions would have caused runtime errors before this fix</li>
</ul></li>
<li>
<strong>FIXED</strong>: Removed erroneous <code>icdo10</code> column references from <code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>:
<ul><li>ICD-O only has editions 1, 2, and 3 (not 10)</li>
<li>ICD-O-3 codes should be handled via the dedicated <code><a href="../reference/add_icdo3s.html">add_icdo3s()</a></code> function</li>
</ul></li>
<li>
<strong>FIXED</strong>: Added <code>icd7*</code> and <code>icd9*</code> columns to diagnosis search in <code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>:
<ul><li>Historical ICD-7 and ICD-9 columns are now properly searched when <code>diag_type = "both"</code>
</li>
<li>Validation and helper function now consistent</li>
</ul></li>
<li>
<strong>FIXED</strong>: Corrected error messages in <code><a href="../reference/add_icdo3s.html">add_icdo3s()</a></code>, <code><a href="../reference/add_snomed3s.html">add_snomed3s()</a></code>, and <code><a href="../reference/add_snomedo10s.html">add_snomedo10s()</a></code>:
<ul><li>Messages now correctly reference the appropriate data types instead of “operation data”</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-25-12-6">Documentation<a class="anchor" aria-label="anchor" href="#documentation-25-12-6"></a></h3>
<ul><li>
<strong>ENHANCED</strong>: <code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code> documentation now clearly lists which diagnosis columns are searched:
<ul><li>When <code>diag_type = "both"</code>: <code>hdia</code>, <code>dia*</code>, <code>ekod*</code>, <code>icd7*</code>, <code>icd9*</code>
</li>
<li>When <code>diag_type = "main"</code>: <code>hdia</code> only</li>
</ul></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.8.19" id="swereg-25819">swereg 25.8.19<a class="anchor" aria-label="anchor" href="#swereg-25819"></a></h2>
<div class="section level3">
<h3 id="cran-submission-preparation-25-8-19">CRAN Submission Preparation<a class="anchor" aria-label="anchor" href="#cran-submission-preparation-25-8-19"></a></h3>
<ul><li>
<strong>CRAN READY</strong>: Package prepared for CRAN submission with comprehensive compliance improvements:
<ul><li>Fixed DESCRIPTION file author field duplication issue</li>
<li>Updated .Rbuildignore to exclude all development files (docs/, .git/, .Rhistory, etc.)</li>
<li>Removed non-portable files (<a href="https://github.com/eaDir" class="external-link">@eaDir</a> directories, .DS_Store files)</li>
<li>Added missing global variable declarations to prevent R CMD check warnings</li>
<li>Verified URL consistency between DESCRIPTION and package startup messages</li>
</ul></li>
<li>
<strong>OPTIMIZED</strong>: Vignette structure significantly improved for CRAN submission:
<ul><li>Reduced total vignette content by 31% (626 lines removed)</li>
<li>Condensed cookbook-survival-analysis.Rmd (removed verbose descriptive statistics and redundant sections)</li>
<li>Simplified skeleton2-clean.Rmd (removed duplicated skeleton1_create workflow)</li>
<li>Streamlined skeleton3-analyze.Rmd (removed redundant data loading and best practices sections)</li>
<li>Fixed all vignette build errors by ensuring consistent data variable availability</li>
<li>All vignettes now compile successfully and use package synthetic data consistently</li>
</ul></li>
<li>
<strong>VALIDATED</strong>: All examples are runnable using package fake data - no \dontrun sections without justification</li>
</ul></div>
<div class="section level3">
<h3 id="code-quality-improvements-25-8-19">Code Quality Improvements<a class="anchor" aria-label="anchor" href="#code-quality-improvements-25-8-19"></a></h3>
<ul><li>
<strong>CONSISTENCY</strong>: Fixed date_columns parameter usage throughout package:
<ul><li>Updated all vignettes to use lowercase date_columns parameters (e.g., “indatum” instead of “INDATUM”)</li>
<li>Added warning to make_lowercase_names() function when uppercase date_columns are provided</li>
<li>Enhanced documentation to clarify that date_columns should use lowercase names</li>
<li>Improved user experience with clear guidance and automatic handling of uppercase inputs</li>
</ul></li>
<li>
<strong>ELEGANCE</strong>: Enhanced vignette code patterns for better readability:
<ul><li>Replaced verbose data() loading patterns with elegant pipe syntax</li>
<li>Updated all data loading to use swereg::fake_* |&gt; copy() |&gt; make_lowercase_names() pattern</li>
<li>Eliminated clumsy multi-step data preparation code throughout vignettes</li>
<li>Improved code flow and professional appearance of package examples</li>
</ul></li>
<li>
<strong>VERIFIED</strong>: Package builds successfully with R CMD build and passes CRAN compliance checks</li>
<li>
<strong>CONFIRMED</strong>: inst/ directory contains only files referenced by package functions</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.7.30" id="swereg-25730">swereg 25.7.30<a class="anchor" aria-label="anchor" href="#swereg-25730"></a></h2>
<div class="section level3">
<h3 id="new-features-25-7-30">New Features<a class="anchor" aria-label="anchor" href="#new-features-25-7-30"></a></h3>
<ul><li>
<strong>NEW</strong>: <code><a href="../reference/make_rowind_first_occurrence.html">make_rowind_first_occurrence()</a></code> helper function for rowdep → rowind transformations:
<ul><li>Simplifies the common pattern of creating row-independent variables from first occurrence of conditions</li>
<li>Automatically handles temp variable creation and cleanup</li>
<li>Uses <code><a href="../reference/first_non_na.html">first_non_na()</a></code> for robust aggregation across all variable types</li>
<li>Includes comprehensive input validation and clear error messages</li>
</ul></li>
<li>
<strong>NEW</strong>: “Understanding rowdep and rowind Variables” vignette:
<ul><li>Explains the fundamental distinction between row-dependent and row-independent variables</li>
<li>Demonstrates common transformation patterns with practical examples</li>
<li>Shows integration with the swereg workflow (skeleton1_create → skeleton2_clean → skeleton3_analyze)</li>
<li>Includes best practices for longitudinal registry data analysis</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-25-7-30">Documentation<a class="anchor" aria-label="anchor" href="#documentation-25-7-30"></a></h3>
<ul><li>
<strong>ENHANCED</strong>: Helper functions now include <code>@family data_integration</code> tags for better organization</li>
<li>
<strong>IMPROVED</strong>: Function examples use existing fake datasets for consistency</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.7.16" id="swereg-25716">swereg 25.7.16<a class="anchor" aria-label="anchor" href="#swereg-25716"></a></h2>
<div class="section level3">
<h3 id="new-swedish-date-parsing-and-enhanced-data-cleaning-25-7-16">New Swedish Date Parsing and Enhanced Data Cleaning<a class="anchor" aria-label="anchor" href="#new-swedish-date-parsing-and-enhanced-data-cleaning-25-7-16"></a></h3>
<ul><li>
<strong>NEW</strong>: <code><a href="../reference/parse_swedish_date.html">parse_swedish_date()</a></code> function for handling Swedish registry dates with varying precision:
<ul><li>Handles 4-character (YYYY), 6-character (YYYYMM), and 8-character (YYYYMMDD) formats</li>
<li>Automatically replaces “0000” with “0701” and “00” with “15” for missing date components</li>
<li>Supports custom defaults for missing date parts</li>
<li>Includes comprehensive error handling and vectorized processing</li>
</ul></li>
<li>
<strong>ENHANCED</strong>: <code><a href="../reference/make_lowercase_names.html">make_lowercase_names()</a></code> now supports automatic date cleaning:
<ul><li>New <code>date_column</code> parameter to specify which column contains dates</li>
<li>Automatically creates cleaned ‘date’ column using <code><a href="../reference/parse_swedish_date.html">parse_swedish_date()</a></code>
</li>
<li>Works with both default and data.table methods</li>
<li>Maintains backward compatibility with existing code</li>
</ul></li>
<li>
<strong>ENHANCED</strong>: All <code>add_*</code> functions now require cleaned date columns:
<ul><li>
<code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>, <code><a href="../reference/add_operations.html">add_operations()</a></code>, <code><a href="../reference/add_rx.html">add_rx()</a></code>, <code><a href="../reference/add_cods.html">add_cods()</a></code> expect ‘date’ column</li>
<li>Clear error messages guide users to use <code>make_lowercase_names(data, date_column = "...")</code>
</li>
<li>Improved validation ensures data preprocessing consistency</li>
</ul></li>
<li>
<strong>ENHANCED</strong>: <code><a href="../reference/create_skeleton.html">create_skeleton()</a></code> now includes <code>personyears</code> column:
<ul><li>Annual rows (is_isoyear==TRUE) have personyears = 1</li>
<li>Weekly rows (is_isoyear==FALSE) have personyears = 1/52.25</li>
<li>Facilitates person-time calculations for survival analysis</li>
</ul></li>
<li>
<strong>IMPROVED</strong>: Survival analysis cookbook vignette updated:
<ul><li>Uses weekly data instead of yearly data for more precise analyses</li>
<li>Age calculation based on isoyearweeksun instead of isoyear</li>
<li>Includes person-time in descriptive statistics</li>
<li>Demonstrates proper use of new date cleaning workflow</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="enhanced-error-handling-and-validation-25-7-16">Enhanced error handling and validation<a class="anchor" aria-label="anchor" href="#enhanced-error-handling-and-validation-25-7-16"></a></h3>
<ul><li>
<strong>ENHANCED</strong>: Comprehensive input validation for all <code>add_*</code> functions:
<ul><li>
<code><a href="../reference/add_onetime.html">add_onetime()</a></code>: Validates skeleton structure, ID column exists, checks for ID matches</li>
<li>
<code><a href="../reference/add_annual.html">add_annual()</a></code>: Validates isoyear parameter, checks skeleton year coverage</li>
<li>
<code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>: Validates diagnosis patterns, checks for diagnosis code columns</li>
<li>
<code><a href="../reference/add_operations.html">add_operations()</a></code>: Validates operation patterns, checks for operation code columns<br></li>
<li>
<code><a href="../reference/add_rx.html">add_rx()</a></code>: Validates prescription data structure, checks source columns</li>
<li>
<code><a href="../reference/add_cods.html">add_cods()</a></code>: Validates death data structure, checks cause of death columns</li>
</ul></li>
<li>
<strong>IMPROVED</strong>: User-friendly error messages with specific guidance:
<ul><li>Clear indication when <code><a href="../reference/make_lowercase_names.html">make_lowercase_names()</a></code> is forgotten</li>
<li>Helpful suggestions for column naming issues</li>
<li>Informative ID mismatch diagnostics with sample values</li>
</ul></li>
<li>
<strong>NEW</strong>: Internal validation helper functions for consistent error handling</li>
<li>
<strong>ADDED</strong>: Input validation for pattern lists, data structures, and parameter ranges</li>
</ul></div>
<div class="section level3">
<h3 id="new-cookbook-documentation-25-7-16">New cookbook documentation<a class="anchor" aria-label="anchor" href="#new-cookbook-documentation-25-7-16"></a></h3>
<ul><li>
<strong>NEW</strong>: Comprehensive survival analysis cookbook (<code>cookbook-survival-analysis.Rmd</code>):
<ul><li>Complete workflow from raw data to Cox proportional hazards model</li>
<li>Time-varying covariates (annual income) with heart attack outcome</li>
<li>Handles common challenges: missing data, multiple events, competing risks</li>
<li>Performance tips for large datasets</li>
<li>Practical solutions for real-world registry analysis</li>
</ul></li>
<li>
<strong>ENHANCED</strong>: Updated <code>_pkgdown.yml</code> with new “Cookbooks” section</li>
<li>
<strong>ADDED</strong>: <code>survival</code> package to Suggests dependencies</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-25-7-16">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-25-7-16"></a></h3>
<ul><li>
<strong>FIXED</strong>: Improved ID matching warnings and error messages across all functions</li>
<li>
<strong>CORRECTED</strong>: Better handling of missing data in time-varying covariate analysis</li>
<li>
<strong>ENHANCED</strong>: More robust parameter validation prevents common user errors</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.7.16" id="swereg-25716-1">swereg 25.7.16<a class="anchor" aria-label="anchor" href="#swereg-25716-1"></a></h2>
<div class="section level3">
<h3 id="major-documentation-restructuring-25-7-16">Major documentation restructuring<a class="anchor" aria-label="anchor" href="#major-documentation-restructuring-25-7-16"></a></h3>
<ul><li>
<strong>RESTRUCTURED</strong>: Complete vignette reorganization for clear learning progression:
<ul><li>NEW “Skeleton concept” vignette: Conceptual foundation explaining the skeleton approach without technical implementation</li>
<li>“Building the data skeleton (skeleton1_create)”: Pure data integration focus - raw data to time-structured skeleton</li>
<li>“Cleaning and deriving variables (skeleton2_clean)”: Pure data cleaning and variable derivation focus</li>
<li>“Production analysis workflows (skeleton3_analyze)”: Memory-efficient processing and final analysis datasets</li>
</ul></li>
<li>
<strong>IMPROVED</strong>: Clear separation of concerns with focused, single-purpose tutorials</li>
<li>
<strong>ENHANCED</strong>: Systematic learning progression from concept to implementation to production</li>
<li>
<strong>UPDATED</strong>: _pkgdown.yml structure with logical vignette grouping</li>
<li>
<strong>PRESERVED</strong>: All existing technical content while improving organization</li>
</ul></div>
<div class="section level3">
<h3 id="content-improvements-25-7-16">Content improvements<a class="anchor" aria-label="anchor" href="#content-improvements-25-7-16"></a></h3>
<ul><li>
<strong>NEW</strong>: Comprehensive conceptual introduction based on presentation content</li>
<li>
<strong>IMPROVED</strong>: Each vignette builds systematically on the previous one</li>
<li>
<strong>ENHANCED</strong>: Better explanation of three types of data integration (one-time, annual, event-based)</li>
<li>
<strong>CLARIFIED</strong>: Production workflow patterns with memory-efficient batching strategies</li>
<li>
<strong>STANDARDIZED</strong>: Consistent academic tone and sentence case throughout</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.7.15" id="swereg-25715">swereg 25.7.15<a class="anchor" aria-label="anchor" href="#swereg-25715"></a></h2>
<div class="section level3">
<h3 id="documentation-and-presentation-improvements-25-7-15">Documentation and presentation improvements<a class="anchor" aria-label="anchor" href="#documentation-and-presentation-improvements-25-7-15"></a></h3>
<ul><li>
<strong>STANDARDIZED</strong>: Changed all titles and headings to normal sentence case throughout:
<ul><li>Vignette titles: “Basic Workflow” → “Basic workflow”, “Complete Workflow” → “Complete workflow”, etc.</li>
<li>README.md section headings: “Core Functions” → “Core functions”, “Data Integration” → “Data integration”, etc.</li>
<li>NEWS.md section headings: “Vignette Restructuring” → “Vignette restructuring”, etc.</li>
<li>CLAUDE.md section headings: “Project Overview” → “Project overview”, “Development Commands” → “Development commands”, etc.</li>
</ul></li>
<li>
<strong>IMPROVED</strong>: Consistent normal sentence case for better readability and less formal appearance</li>
<li>
<strong>SIMPLIFIED</strong>: Removed subtitle text after colons in vignette titles for cleaner presentation</li>
<li>
<strong>ENHANCED</strong>: Improved Core Concept section in basic workflow vignette with clear explanation of three data types:
<ul><li>One-time data (demographics): Added to all rows for each person</li>
<li>Annual data (income, family status): Added to all rows for specific year</li>
<li>Event-based data (diagnoses, prescriptions, deaths): Added to rows where events occurred</li>
</ul></li>
<li>
<strong>CLARIFIED</strong>: Step 1 documentation now properly explains all skeleton columns including <code>isoyearweeksun</code>
</li>
<li>
<strong>VERIFIED</strong>: All vignettes compile successfully with improved content</li>
</ul></div>
<div class="section level3">
<h3 id="major-documentation-and-vignette-reorganization-25-7-15">Major documentation and vignette reorganization<a class="anchor" aria-label="anchor" href="#major-documentation-and-vignette-reorganization-25-7-15"></a></h3>
<ul><li>
<strong>RESTRUCTURED</strong>: Complete vignette reorganization with improved naming and content flow:
<ul><li>
<code>swereg.Rmd</code> → <code>basic-workflow.Rmd</code>: Focused introduction to skeleton1_create</li>
<li>
<code>advanced-workflow.Rmd</code> → <code>complete-workflow.Rmd</code>: Two-stage workflow (skeleton1_create + skeleton2_clean)</li>
<li>
<code>memory-efficient-batching.Rmd</code>: Maintained as comprehensive three-stage workflow guide</li>
</ul></li>
<li>
<strong>IMPROVED</strong>: Eliminated content redundancy between vignettes for clearer learning progression</li>
<li>
<strong>ENHANCED</strong>: Updated _pkgdown.yml configuration to reflect new vignette structure</li>
</ul></div>
<div class="section level3">
<h3 id="function-documentation-improvements-25-7-15">Function documentation improvements<a class="anchor" aria-label="anchor" href="#function-documentation-improvements-25-7-15"></a></h3>
<ul><li>
<strong>ENHANCED</strong>: Comprehensive documentation improvements for all exported functions:
<ul><li>Added <a href="https://github.com/family" class="external-link">@family</a> tags for logical grouping (data_integration, skeleton_creation, data_preprocessing)</li>
<li>Added <a href="https://github.com/seealso" class="external-link">@seealso</a> sections with cross-references to related functions and vignettes</li>
<li>Replaced placeholder examples with runnable code using synthetic data</li>
<li>Improved parameter documentation with detailed descriptions and expected formats</li>
<li>Enhanced return value documentation with explicit side effects description</li>
</ul></li>
<li>
<strong>STANDARDIZED</strong>: Consistent academic tone throughout all documentation</li>
</ul></div>
<div class="section level3">
<h3 id="professional-presentation-updates-25-7-15">Professional presentation updates<a class="anchor" aria-label="anchor" href="#professional-presentation-updates-25-7-15"></a></h3>
<ul><li>
<strong>IMPROVED</strong>: Removed informal elements and adopted academic tone across all documentation</li>
<li>
<strong>UPDATED</strong>: Changed terminology from “fake data” to “synthetic data” throughout</li>
<li>
<strong>ENHANCED</strong>: More professional language in README.md and vignettes</li>
<li>
<strong>STANDARDIZED</strong>: Consistent formal tone appropriate for scientific software</li>
</ul></div>
<div class="section level3">
<h3 id="technical-improvements-25-7-15">Technical improvements<a class="anchor" aria-label="anchor" href="#technical-improvements-25-7-15"></a></h3>
<ul><li>
<strong>VERIFIED</strong>: All vignettes compile successfully with updated content</li>
<li>
<strong>TESTED</strong>: Package passes R CMD check with all documentation improvements</li>
<li>
<strong>UPDATED</strong>: CLAUDE.md reflects new vignette structure and documentation standards</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="25.7.1" id="swereg-2571">swereg 25.7.1<a class="anchor" aria-label="anchor" href="#swereg-2571"></a></h2>
<div class="section level3">
<h3 id="vignette-restructuring-25-7-1">Vignette restructuring<a class="anchor" aria-label="anchor" href="#vignette-restructuring-25-7-1"></a></h3>
<ul><li>
<strong>RESTRUCTURED</strong>: Reorganized vignettes for clearer learning progression:
<ul><li>
<code>swereg.Rmd</code>: Clean skeleton1_create tutorial using full datasets (removed subset filtering)</li>
<li>
<code>advanced-workflow.Rmd</code>: Focused skeleton1→skeleton2 workflow (removed batching and skeleton3 content)</li>
<li>
<code>memory-efficient-batching.Rmd</code>: NEW comprehensive batching vignette with complete skeleton1→skeleton2→skeleton3 workflow for large-scale studies</li>
</ul></li>
<li>
<strong>IMPROVED</strong>: GitHub Actions workflow optimization with dependency caching and binary packages for faster CI/CD</li>
</ul></div>
<div class="section level3">
<h3 id="batching-vignette-fixes-25-7-1">Batching vignette fixes<a class="anchor" aria-label="anchor" href="#batching-vignette-fixes-25-7-1"></a></h3>
<ul><li>
<strong>FIXED</strong>: Updated memory-efficient-batching vignette with production-ready improvements:
<ul><li>Replace <code><a href="https://rdrr.io/r/base/split.html" class="external-link">split()</a></code> with <code><a href="https://rdrr.io/pkg/csutil/man/easy_split.html" class="external-link">csutil::easy_split</a></code> for better batch handling</li>
<li>Replace <code>saveRDS/readRDS</code> with <code>qs::qsave/qread</code> for 2-10x faster file I/O</li>
<li>Fix skeleton3_analyze to properly aggregate weekly→yearly data using <code><a href="../reference/max_with_infinite_as_na.html">swereg::max_with_infinite_as_na</a></code>
</li>
<li>Remove incorrect <code>is_isoyear == TRUE</code> filter in skeleton3_analyze</li>
<li>Fix analysis results to avoid NaN outputs in treatment rate calculations</li>
<li>Add explanations for weekly→yearly data aggregation and qs package performance benefits</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-25-7-1">New features<a class="anchor" aria-label="anchor" href="#new-features-25-7-1"></a></h3>
<ul><li>
<strong>NEW</strong>: Added <code>isoyearweeksun</code> variable to <code><a href="../reference/create_skeleton.html">create_skeleton()</a></code> function - provides Date representing the Sunday (last day) of each ISO week/year for easier date calculations</li>
<li>
<strong>NEW</strong>: Updated package logo</li>
<li>
<strong>IMPROVED</strong>: Updated all vignettes to not assume swereg is loaded - all functions use <code>swereg::</code> prefix and <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> calls use <code>package="swereg"</code> argument</li>
<li>
<strong>IMPROVED</strong>: Updated function documentation to clarify that pattern matching functions (<code>add_diagnoses</code>, <code>add_cods</code>, <code>add_rx</code>) automatically add “^” prefix - users should NOT include “^” in their patterns</li>
<li>
<strong>NEW</strong>: Added comprehensive fake Swedish registry datasets for development and vignettes:
<ul><li>
<code>fake_person_ids</code>: 1000 synthetic personal identifiers</li>
<li>
<code>fake_demographics</code>: Demographics data matching SCB format</li>
<li>
<code>fake_annual_family</code>: Annual family status data</li>
<li>
<code>fake_inpatient_diagnoses</code> and <code>fake_outpatient_diagnoses</code>: NPR diagnosis data with ICD-10 codes</li>
<li>
<code>fake_prescriptions</code>: LMED prescription data with ATC codes and hormone therapy focus</li>
<li>
<code>fake_cod</code>: Cause of death data</li>
</ul></li>
<li>
<strong>NEW</strong>: Added two comprehensive vignettes:
<ul><li>
<code>swereg.Rmd</code>: Basic skeleton1_create workflow tutorial</li>
<li>
<code>advanced-workflow.Rmd</code>: Complete 3-phase workflow (skeleton1 → skeleton2 → skeleton3)</li>
</ul></li>
<li>
<strong>NEW</strong>: Replaced magrittr pipe (%&gt;%) with base pipe (|&gt;) throughout codebase</li>
<li>
<strong>NEW</strong>: Added memory-efficient batched processing examples for large registry studies</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-25-7-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-25-7-1"></a></h3>
<ul><li>
<strong>CRITICAL</strong>: Fixed incorrect variable names in <code>fake_cod</code> dataset - changed from non-Swedish <code>underlying_cod/contributory_cod1/contributory_cod2</code> to correct Swedish registry names <code>ulorsak/morsak1/morsak2</code>
</li>
<li>
<strong>VERIFIED</strong>: Confirmed all fake datasets use correct Swedish registry variable name conventions</li>
<li>
<strong>VERIFIED</strong>: All ICD-10 and ATC codes in fake datasets are properly formatted and realistic</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-improvements-25-7-1">Documentation improvements<a class="anchor" aria-label="anchor" href="#documentation-improvements-25-7-1"></a></h3>
<ul><li>
<strong>BREAKING</strong>: Fixed incorrect function descriptions that were copied from another package</li>
<li>
<strong>NEW</strong>: Added comprehensive roxygen2 documentation for all exported functions:
<ul><li>
<code><a href="../reference/add_onetime.html">add_onetime()</a></code>: Documents merging one-time/baseline data to skeleton</li>
<li>
<code><a href="../reference/add_annual.html">add_annual()</a></code>: Documents merging annual data for specific ISO years</li>
<li>
<code><a href="../reference/add_cods.html">add_cods()</a></code>: Documents cause of death analysis with ICD-10 codes</li>
<li>
<code><a href="../reference/add_diagnoses.html">add_diagnoses()</a></code>: Documents diagnosis analysis with main/secondary diagnoses</li>
<li>
<code><a href="../reference/add_operations.html">add_operations()</a></code>: Documents surgical operation analysis including gender-affirming procedures</li>
<li>
<code><a href="../reference/add_rx.html">add_rx()</a></code>: Documents prescription drug analysis with ATC/product codes</li>
<li>
<code><a href="../reference/create_skeleton.html">create_skeleton()</a></code>: Documents longitudinal skeleton creation with detailed return structure</li>
<li>
<code><a href="../reference/make_lowercase_names.html">make_lowercase_names()</a></code>: Documents generic function with S3 methods</li>
<li>
<code><a href="../reference/x2023_mht_add_lmed.html">x2023_mht_add_lmed()</a></code>: Documents specialized MHT study function</li>
</ul></li>
<li>
<strong>NEW</strong>: Added documentation for all helper functions:
<ul><li>
<code><a href="../reference/min_with_infinite_as_na.html">min_with_infinite_as_na()</a></code>, <code><a href="../reference/max_with_infinite_as_na.html">max_with_infinite_as_na()</a></code>
</li>
<li>
<code><a href="../reference/as_logical_min_with_infinite_as_na.html">as_logical_min_with_infinite_as_na()</a></code>, <code><a href="../reference/as_logical_max_with_infinite_as_na.html">as_logical_max_with_infinite_as_na()</a></code>
</li>
<li>
<code><a href="../reference/first_non_na.html">first_non_na()</a></code>, <code><a href="../reference/last_non_na.html">last_non_na()</a></code>
</li>
</ul></li>
<li>
<strong>NEW</strong>: Added <code>@param</code> descriptions for all function parameters</li>
<li>
<strong>NEW</strong>: Added <code>@return</code> descriptions explaining function outputs</li>
<li>
<strong>NEW</strong>: Added <code>@examples</code> with practical usage demonstrations</li>
<li>
<strong>NEW</strong>: Added <code>@details</code> and <code>@note</code> sections for complex functions</li>
<li>
<strong>IMPROVED</strong>: Used proper roxygen2 practices including <code>@rdname</code> for S3 methods and <code>@seealso</code> cross-references</li>
</ul></div>
<div class="section level3">
<h3 id="package-structure-25-7-1">Package structure<a class="anchor" aria-label="anchor" href="#package-structure-25-7-1"></a></h3>
<ul><li>All exported functions now have complete, accurate documentation suitable for CRAN submission</li>
<li>Documentation focuses on Swedish registry data analysis workflows</li>
<li>Examples use <code>\dontrun{}</code> appropriately for functions requiring external data</li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Crafted by <a href="https://www.rwhite.no" class="external-link">Richard Aubrey White</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

