# TTEDesign class for target trial emulation

TTEDesign class for target trial emulation

TTEDesign class for target trial emulation

## Details

Holds column name mappings that define the schema for trial data. This
allows specifying variable names once and reusing them across all TTE
workflow functions.

## See also

\[tte_trial()\] for creating trial objects, \[TTETrial\] for the trial
class

Other tte_classes:
[`TTEPlan`](https://papadopoulos-lab.github.io/swereg/reference/TTEPlan.md),
[`TTETrial`](https://papadopoulos-lab.github.io/swereg/reference/TTETrial.md),
[`tte_design()`](https://papadopoulos-lab.github.io/swereg/reference/tte_design.md),
[`tte_plan()`](https://papadopoulos-lab.github.io/swereg/reference/tte_plan.md),
[`tte_plan_load()`](https://papadopoulos-lab.github.io/swereg/reference/tte_plan_load.md),
[`tte_trial()`](https://papadopoulos-lab.github.io/swereg/reference/tte_trial.md)

## Public fields

- `person_id_var`:

  Character or NULL, person identifier column name.

- `id_var`:

  Character, trial identifier column name.

- `exposure_var`:

  Character, exposure/treatment column name.

- `outcome_vars`:

  Character vector, outcome column names.

- `confounder_vars`:

  Character vector, confounder column names.

- `follow_up_time`:

  Integer, follow-up duration.

- `tstart_var`:

  Character, period start time column name.

- `tstop_var`:

  Character, period end time column name.

- `time_exposure_var`:

  Character or NULL, time-varying exposure column.

- `eligible_var`:

  Character or NULL, eligibility column name.

- `admin_censor_var`:

  Character or NULL, admin censoring column.

- `admin_censor_isoyearweek`:

  Character or NULL, admin censoring date.

## Methods

### Public methods

- [`TTEDesign$new()`](#method-TTEDesign-new)

- [`TTEDesign$print()`](#method-TTEDesign-print)

- [`TTEDesign$clone()`](#method-TTEDesign-clone)

------------------------------------------------------------------------

### Method `new()`

Create a new TTEDesign object.

#### Usage

    TTEDesign$new(
      person_id_var = NULL,
      id_var = "trial_id",
      exposure_var,
      outcome_vars,
      confounder_vars,
      follow_up_time,
      tstart_var = "tstart",
      tstop_var = "tstop",
      time_exposure_var = NULL,
      eligible_var = NULL,
      admin_censor_var = NULL,
      admin_censor_isoyearweek = NULL
    )

#### Arguments

- `person_id_var`:

  Character or NULL, name of the person identifier column for pre-panel
  (person-week) data. Required for \[tte_match()\] and \[tte_expand()\]
  operations. (default: NULL).

- `id_var`:

  Character, name of the trial identifier column. Auto-generated by
  \[tte_expand()\] as "trial_id" (default: "trial_id").

- `exposure_var`:

  Character, name of the baseline exposure/treatment column.

- `outcome_vars`:

  Character vector, names of outcome event indicator columns.

- `confounder_vars`:

  Character vector, names of confounder columns for propensity/censoring
  models.

- `follow_up_time`:

  Integer, expected follow-up duration in time units.

- `tstart_var`:

  Character, name of period start time column (default: "tstart").

- `tstop_var`:

  Character, name of period end time column (default: "tstop").

- `time_exposure_var`:

  Character or NULL, name of time-varying exposure column for
  per-protocol analysis (default: NULL).

- `eligible_var`:

  Character or NULL, name of eligibility indicator column (default:
  NULL).

- `admin_censor_var`:

  Character or NULL, name of administrative censoring boundary column
  (default: NULL). Mutually exclusive with \`admin_censor_isoyearweek\`.

- `admin_censor_isoyearweek`:

  Character or NULL, the study end date in ISO year-week format (e.g.,
  "2023-52"). When set, administrative censoring is computed internally
  as weeks from each trial's entry date to this global study end date.
  Requires an \`isoyearweek\` column in the data. Mutually exclusive
  with \`admin_censor_var\` (default: NULL).

------------------------------------------------------------------------

### Method [`print()`](https://rdrr.io/r/base/print.html)

Print the TTEDesign object.

#### Usage

    TTEDesign$print(...)

------------------------------------------------------------------------

### Method `clone()`

The objects of this class are cloneable with this method.

#### Usage

    TTEDesign$clone(deep = FALSE)

#### Arguments

- `deep`:

  Whether to make a deep clone.

## Examples

``` r
# Design for post-panel (trial-level) data
design <- tte_design(
  id_var = "trial_id",
  exposure_var = "baseline_exposed",
  outcome_vars = c("death", "hosp"),
  confounder_vars = c("age", "education"),
  follow_up_time = 156L
)

# Design for pre-panel (person-week) data with full workflow
design_prepanel <- tte_design(
  person_id_var = "id",
  exposure_var = "baseline_exposed",
  outcome_vars = c("death", "hosp"),
  confounder_vars = c("age", "education"),
  follow_up_time = 156L,
  eligible_var = "eligible"
)
```
